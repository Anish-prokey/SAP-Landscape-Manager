import{r as l,R as u,j as e,h as U,c as Y}from"./Home-b0c5077f.js";import{l as q,u as K,P as Q,a as A,E as W}from"./ProductModal-af0e0c60.js";function ee(){const[x,k]=l.useState("landscape"),v=a=>{k(a)},[b,P]=l.useState(""),[R,j]=l.useState([]),T=a=>{P(a.target.value)},g=R.filter(a=>Object.values(a).some(s=>typeof s=="string"&&s.toLowerCase().includes(b.toLowerCase()))),[c,f]=u.useState(!1),i=()=>{f(!0),setTimeout(()=>{f(!1)},3e3)},[t,n]=l.useState(void 0);l.useEffect(()=>{(async()=>{try{const s=await A.get("https://awsld49ci01.tyson.com:8443/sap/opu/odata/sap/ZAPI_PRDVERS_SRV/LandscapeDetailsSet",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS"},withCredentials:!0,auth:{username:"",password:""}});j(s.data.d.results.map(r=>({Sysid:r.Sysid,Runhdb:r.Runhdb,Sapproduct:r.Sapproduct,Systype:r.Systype})))}catch(s){console.error(s)}})()},[]),console.log(j);const[p,_]=l.useState(""),[S,E]=l.useState(""),y=a=>{E(a.target.value),_(a.target.value)},w=l.useRef(null),{onDownload:I}=q.useDownloadExcel({currentTableRef:w.current,filename:"empInfo",sheet:"empData"}),L=()=>{if(i(),S==="excel")I(),event.preventDefault(),n({type:"success"});else if(S==="pdf"){event.preventDefault(),n({type:"success"});const a="pt",s="A4",r="portrait";console.log("PDF---");const Z=40,d=new W(r,a,s);d.setFontSize(15);const G="SAP Landscape Data",J=[["SAP Product","SAP System ID","Type (Abap, dual stack, Java, Hana XS, S/4 Hana)","Does It Run On A Hana Database"]],X=g.map(h=>[h.Sapproduct,h.Sysid,h.Systype,h.Runhdb]);let $={startY:50,head:J,body:X};d.text(G,Z,40),d.autoTable($),d.save("report.pdf")}else event.preventDefault(),n({type:"error"})},[N,o]=l.useState(0),[C,H]=l.useState(""),F=async()=>{event.preventDefault();try{o(N+50),(await A.post("http://localhost:3000/generate-and-send",{recipientEmail:C,fileFormat:p})).data.message==="sent"?(n({type:"sent"}),o(100),i()):(o(100),n({type:"not_sent"}),i())}catch(a){o(100),n({type:"not_sent"}),i(),console.error(a)}},[O,D]=u.useState(!1),B=()=>D(!0),M=()=>{m(-1),D(!1)},[z,m]=l.useState(null),V=(a,s)=>{a.preventDefault(),m(-1),B(),m(s),console.log(s)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"nav navbar navbar-expand-lg navbar-light bg-light py-0",children:e.jsxs("div",{className:"nav container-fluid",children:[e.jsxs("a",{className:"navbar-brand",href:"https://www.tysonfoods.com/",target:"_blank",children:[" ",e.jsx("img",{src:U,class:"logo img-fluid rounded-top",alt:"tyson logo"})]}),e.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:e.jsx("span",{className:"navbar-toggler-icon"})}),e.jsx("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:e.jsxs("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:`nav-link mt-2 mx-5 ${x==="landscape"?"active":""}`,onClick:()=>v("landscape"),"aria-current":"page",href:"/landscape",children:"SAP Landscape"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:`nav-link mt-2 mx-5 ${x==="statistics"?"active":""}`,onClick:()=>v("statistics"),href:"../statistics/index.html",children:"Statistics"})}),e.jsx("li",{className:"d-flex",children:e.jsx("input",{className:"form-control input-search me-2 mt-2 mx-5",type:"search",placeholder:"Search","aria-label":"Search",value:b,onChange:T})})]})})]})}),c&&(t==null?void 0:t.type)==="success"&&e.jsx("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:e.jsx("strong",{children:'"Download Successful!!!"'})}),c&&(t==null?void 0:t.type)==="error"&&e.jsx("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:e.jsx("strong",{children:"Download Failed!!!"})}),c&&(t==null?void 0:t.type)==="sent"&&e.jsx("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:e.jsx("strong",{children:'"Email Sent Successfully!!!"'})}),c&&(t==null?void 0:t.type)==="not_sent"&&e.jsx("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:e.jsx("strong",{children:'"Failed to send email!!!"'})}),e.jsx(K,{color:"#002554",height:"3px",shadow:"true",progress:N,onLoaderFinished:()=>o(0)}),e.jsxs("div",{className:"table_container my-2 mx-2",children:[e.jsx("div",{className:"table-responsive ",children:e.jsxs("table",{className:"table table-responsive table-bordered responsive-lg responsive-md responsive-sm",ref:w,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SAP System ID "}),e.jsx("th",{children:"Type (Abap, dual stack, Java, Hana XS, S/4 Hana)"}),e.jsx("th",{children:"Does It Run On A Hana Database "})]})}),e.jsx("tbody",{children:g.map(a=>e.jsxs("tr",{children:[e.jsxs("td",{onClick:s=>V(s,a.Sysid),children:[e.jsx("a",{children:e.jsx("svg",{width:"15",height:"15",fill:"currentColor",className:"bi bi-info-circle-fill",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})})})," ",a.Sysid]}),e.jsx("td",{children:a.Systype}),e.jsx("td",{children:a.Runhdb})]},a.id))})]})}),e.jsx("hr",{style:{background:"#65686B",color:"#65686B",borderColor:"#65686B",height:"0.1rem"}})]}),e.jsxs("form",{className:"send_form mx-2 mx-4",action:"",method:"post",children:[e.jsx("div",{className:"mb-3 mt-4",children:e.jsx("input",{type:"email",className:"form-control",name:"",id:"","aria-describedby":"emailHelpId",placeholder:"abc@tyson.com",value:C,onChange:a=>H(a.target.value)})}),e.jsx("h4",{className:"form-text mt-4",children:"Send data as"}),e.jsxs("div",{className:"form-check",value:p,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"radio",id:"radio_excel",value:"excel",onChange:y}),e.jsx("label",{className:"form-check-label",for:"radio_excel",children:"Excel"})]}),e.jsxs("div",{className:"form-check",value:p,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"radio",id:"radio_pdf",value:"pdf",onChange:y}),e.jsx("label",{className:"form-check-label",for:"radio_pdf",children:"Pdf"})]}),e.jsxs("button",{onClick:L,type:"button",className:"sub_btn btn mt-4 mx-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-download",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}),e.jsx("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"})]}),"  Download"]}),e.jsxs("button",{onClick:F,type:"submit",className:"sub_btn btn mt-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-send-fill",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"})}),"  Send"]})]}),e.jsx(Q,{handleClose:M,open:O,sapSystemId:z}),e.jsx("div",{})]})}function ae(){return e.jsx(e.Fragment,{children:e.jsx(ee,{})})}Y.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(ae,{})}));
